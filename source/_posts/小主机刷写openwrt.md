---
title: 小主机刷写openwrt
date: 2023-04-24 22:21:31
cover: https://cdn.jsdelivr.net/gh/JuMaomaomao/images@latest/op-start.png
tags:

---

**主要原理或步骤：**

把固件刷入U盘 - 主机从U盘启动 - 把固件上传到主机 - dd命令刷写系统 - 拔掉U盘重新启动

> 刷机前要准备的工具
>
> - 小主机（网线）
> - 键盘
> - 屏幕（HDMI/DP线）
> - U盘
> - 电脑

## 开始

1、准备好要刷的固件，使用写盘工具写入到U盘，写盘工具我这里使用的是 [balenaEtcher](https://www.balena.io/etcher#download-etcher)

2、给小主机插上 **电源**、**键盘**、**显示器**、**U盘**、**网线**，网线插入到电脑

3、主机开机，以个人使用的J1900为例，狂按`del`键进`BIOS`，其他机器进BIOS按键不同。在BIOS中，**将U盘设置为第一启动项**，完成后保存并退出，这样就能进入U盘中的系统

4、确保此时电脑和小主机网线连接无误。电脑设置为自动获取IP，连上小主机的网络后，进入固件后台

5、进入后台后，依次点击 `系统 - 文件传输`，将电脑上的openwrt固件上传到主机，记住上传后的固件地址

6、使用终端（固件自带的TTYD终端或任意终端），使用dd命令刷写固件到小主机，命令如下，命令中的path为上一步上传到主机的固件地址，请更换为自己的地址。例：`/tmp/upload/openwrt.img`。这里的`/dev/sda`需要使用命令`fdisk -l`查看

```sh
dd if=path of=/dev/sda
```

此时系统已经刷写完毕，断电，拔U盘，启动主机，此时就会从主机内部系统启动。